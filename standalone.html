<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MP3 AutoCut - –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</title>
    <style>
        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        h2 {
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1.5rem;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –æ–±–ª–∞—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ */
        .file-upload-container {
            border: 2px dashed #3498db;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            background-color: #ecf0f1;
            transition: all 0.3s ease;
        }

        .file-upload-container.drag-over {
            background-color: #d6eaf8;
            border-color: #2980b9;
        }

        .file-upload-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .file-upload-btn {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .file-upload-btn:hover {
            background-color: #2980b9;
        }

        .upload-icon {
            width: 64px;
            height: 64px;
            margin-bottom: 10px;
            fill: #3498db;
        }

        .file-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        #clearFileBtn {
            margin-top: 10px;
            padding: 5px 15px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        #clearFileBtn:hover {
            background-color: #c0392b;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .settings-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .slider-container {
            margin-bottom: 20px;
        }

        .slider {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã—Ö–æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ */
        .output-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .output-path-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .output-path-container label {
            min-width: 180px;
            font-weight: 500;
        }

        .output-path-container input[type="text"] {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: monospace;
        }

        input[type="checkbox"] {
            margin-right: 8px;
            transform: scale(1.2);
        }
        
        .info-text {
            margin-top: 5px;
            color: #7f8c8d;
            font-style: italic;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç—É–ª—Ç–∏–ø–æ–≤ */
        [data-tooltip] {
            position: relative;
            cursor: help;
        }
        
        [data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #34495e;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: normal;
            width: max-content;
            max-width: 300px;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            text-align: left;
            font-weight: normal;
            line-height: 1.4;
        }
        
        [data-tooltip]::before {
            content: "";
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%) translateY(100%);
            border-width: 6px;
            border-style: solid;
            border-color: #34495e transparent transparent transparent;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        [data-tooltip]:hover::after,
        [data-tooltip]:hover::before {
            opacity: 1;
            visibility: visible;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ */
        .action-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .process-btn {
            padding: 15px 30px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .process-btn:hover {
            background-color: #27ae60;
        }

        .process-btn:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ */
        .command-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .command-output {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            overflow-x: auto;
            margin-top: 10px;
        }

        .copy-btn {
            margin-top: 10px;
            padding: 8px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .copy-btn:hover {
            background-color: #2980b9;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π */
        .instructions {
            background-color: #f9f9f9;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 5px 5px 0;
        }

        .instructions ol {
            margin-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        /* ===== DARK THEME ===== */
        body.dark-theme {
            background-color: #181c1f;
            color: #e0e0e0;
        }
        .dark-theme .container,
        .dark-theme .settings-container,
        .dark-theme .output-container,
        .dark-theme .command-container {
            background-color: #23272a;
            color: #e0e0e0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        .dark-theme input,
        .dark-theme select,
        .dark-theme textarea {
            background: #23272a;
            color: #e0e0e0;
            border: 1px solid #444;
        }
        .dark-theme .file-upload-container {
            background-color: #23272a;
            border-color: #607d8b;
        }
        .dark-theme .file-upload-btn,
        .dark-theme .copy-btn,
        .dark-theme .process-btn {
            background-color: #607d8b;
        }
        .dark-theme .file-upload-btn:hover,
        .dark-theme .copy-btn:hover,
        .dark-theme .process-btn:hover {
            background-color: #455a64;
        }
        .dark-theme .command-output {
            background-color: #11171b;
            color: #e0e0e0;
        }
        .dark-theme [data-tooltip]::after {
            background-color: #222;
            color: #fff;
            border-color: #222 transparent transparent transparent;
        }
        .dark-theme .instructions {
            background-color: #23272a;
            border-left: 4px solid #42a5f5;
            color: #e0e0e0;
        }
        .dark-theme .instructions h3 {
            color: #90caf9;
        }
        .dark-theme .instructions ol,
        .dark-theme .instructions li {
            color: #e0e0e0;
        }
        .dark-theme .file-info {
            background-color: #23272a;
            color: #e0e0e0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.4);
        }
        .dark-theme .file-info button {
            background-color: #e57373;
            color: #fff;
        }
        .dark-theme .file-info button:hover {
            background-color: #c62828;
        }
        .file-info #fileName {
            display: block;
            max-width: 100%;
            overflow-x: auto;
            white-space: pre;
            font-size: 0.95em;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <button id="themeToggleBtn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" style="position:fixed;top:18px;right:18px;z-index:1000;font-size:1.5rem;">üåô</button>
    <div class="container">
        <h1>MP3 AutoCut - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã</h1>
        
        <div class="instructions">
            <h3>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h3>
            <ol>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ MP3 —Ñ–∞–π–ª –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –ø–æ–º–æ—â—å—é –ø–æ–ª–∑—É–Ω–∫–æ–≤</li>
                <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É"</li>
                <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É</li>
                <li>–í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ</li>
            </ol>
        </div>
        
        <div class="file-upload-container" id="dropArea" data-tooltip="–í—ã–±–µ—Ä–∏—Ç–µ MP3 —Ñ–∞–π–ª –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏. –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –¥–ª—è –≤—ã–±–æ—Ä–∞ —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ MP3.">
            <div class="file-upload-content">
                <svg class="upload-icon" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 20h12M12 16V4m0 0l3.5 3.5M12 4L8.5 7.5" stroke="#3498db" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
                <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ MP3 —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏</p>
                <label for="fileInput" class="file-upload-btn">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª</label>
                <input type="file" id="fileInput" accept=".mp3" hidden>
            </div>
            <div class="file-info" id="fileInfo" style="display: none;">
                <p>–í—ã–±—Ä–∞–Ω —Ñ–∞–π–ª: <span id="fileName">–ù–µ—Ç —Ñ–∞–π–ª–∞</span></p>
                <p>–†–∞–∑–º–µ—Ä: <span id="fileSize">0</span> –ú–ë</p>
                <button id="clearFileBtn">–û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
        </div>

        <div class="settings-container">
            <h2>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏</h2>
            
            <div class="slider-container">
                <label for="durationSlider" data-tooltip="–ñ–µ–ª–∞–µ–º–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏ MP3 —Ñ–∞–π–ª–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö. –°–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç —Å—Ç–∞—Ä–∞—Ç—å—Å—è –¥–µ–ª–∞—Ç—å —á–∞—Å—Ç–∏ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–π –¥–ª–∏–Ω—ã, —Ä–∞–∑—Ä–µ–∑–∞—è –ø–æ —Ç–∏—à–∏–Ω–µ.">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—É—Å–∫–∞ (—Å–µ–∫): <span id="durationValue">180</span></label>
                <input type="range" id="durationSlider" min="30" max="600" value="180" class="slider">
            </div>
            
            <div class="slider-container">
                <label for="windowSlider" data-tooltip="–†–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–∏—à–∏–Ω—ã –≤–æ–∫—Ä—É–≥ —Ç–æ—á–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è. –ß–µ–º –±–æ–ª—å—à–µ –æ–∫–Ω–æ, —Ç–µ–º –±–æ–ª—å—à–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â—É—é —Ç–∏—à–∏–Ω—É, –Ω–æ —á–∞—Å—Ç–∏ –º–æ–≥—É—Ç —Å–∏–ª—å–Ω–µ–µ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –∑–∞–¥–∞–Ω–Ω–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.">–û–∫–Ω–æ –ø–æ–∏—Å–∫–∞ —Ç–∏—à–∏–Ω—ã (—Å–µ–∫): <span id="windowValue">10</span></label>
                <input type="range" id="windowSlider" min="1" max="30" value="10" class="slider">
            </div>
            
            <div class="slider-container">
                <label for="thresholdSlider" data-tooltip="–£—Ä–æ–≤–µ–Ω—å –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –≤ dBFS, –Ω–∏–∂–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–≤—É–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–∏—à–∏–Ω–æ–π. –ß–µ–º –º–µ–Ω—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, -60), —Ç–µ–º —Ç–∏—à–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–≤—É–∫, —á—Ç–æ–±—ã —Å—á–∏—Ç–∞—Ç—å—Å—è —Ç–∏—à–∏–Ω–æ–π. –ß–µ–º –±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, -20), —Ç–µ–º –±–æ–ª—å—à–µ –∑–≤—É–∫–æ–≤ –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è —Ç–∏—à–∏–Ω–æ–π.">–ü–æ—Ä–æ–≥ —Ç–∏—à–∏–Ω—ã (dBFS): <span id="thresholdValue">-40</span></label>
                <input type="range" id="thresholdSlider" min="-60" max="-20" value="-40" class="slider">
            </div>
            
            <div class="slider-container">
                <label for="minSilenceSlider" data-tooltip="–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∏—à–∏–Ω—ã –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —Ç–æ—á–µ–∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è. –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ —Ç–∏—à–∏–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ –ø–∞—É–∑–∞–º–∏ –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏, –∞ –Ω–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ –º–µ—Å—Ç–∞–º–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è.">–ú–∏–Ω. –¥–ª–∏–Ω–∞ —Ç–∏—à–∏–Ω—ã (–º—Å): <span id="minSilenceValue">500</span></label>
                <input type="range" id="minSilenceSlider" min="100" max="2000" value="500" class="slider">
            </div>
            
            <div class="slider-container">
                <label for="speedSlider" data-tooltip="–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è. –ó–Ω–∞—á–µ–Ω–∏—è –º–µ–Ω—å—à–µ 1.0 –∑–∞–º–µ–¥–ª—è—é—Ç –∞—É–¥–∏–æ, –±–æ–ª—å—à–µ 1.0 - —É—Å–∫–æ—Ä—è—é—Ç. –ù–∞–∏–ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Å—Ç–∏–≥–∞—é—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0.5-2.0. –ó–Ω–∞—á–µ–Ω–∏—è –≤—ã—à–µ 2.0 –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –º–æ–≥—É—Ç –∑–≤—É—á–∞—Ç—å –Ω–µ–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ.">–°–∫–æ—Ä–æ—Å—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è: <span id="speedValue">1.0</span>x</label>
                <input type="range" id="speedSlider" min="0.5" max="2.0" step="0.1" value="1.0" class="slider">
            </div>
        </div>
        
        <div class="output-container">
            <h2>–î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏</h2>
            <div class="output-path-container">
                <label for="outputPath" data-tooltip="–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≤ –∫–æ—Ç–æ—Ä—É—é –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ MP3 —Ñ–∞–π–ª—ã. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ –ø–∞–ø–∫–∞ 'ready_mp3' –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.">–í—ã—Ö–æ–¥–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:</label>
                <input type="text" id="outputPath" value="ready_mp3">
            </div>
            <div class="output-path-container" style="margin-top: 15px;">
                <label for="copyToPath" data-tooltip="–ü—É—Ç—å –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –¥–∏—Å–∫ –∏–ª–∏ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ. –û–±—ã—á–Ω–æ —ç—Ç–æ –ø—É—Ç—å –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–º—É –≤–Ω–µ—à–Ω–µ–º—É –¥–∏—Å–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, '/Volumes/SWIM PRO' –Ω–∞ macOS –∏–ª–∏ 'D:\' –Ω–∞ Windows.">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ (--copy-to):</label>
                <input type="text" id="copyToPath" value="/Volumes/SWIM PRO" placeholder="–ü—É—Ç—å –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤">
            </div>
            <div class="info-text">
                <small>–ü—É—Ç—å –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –¥–∏—Å–∫ SWIM PRO. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ –ø–∞–ø–∫—É copied_mp3.</small>
            </div>
            <div style="margin-top: 10px;">
                <div>
                    <label for="skipExisting" data-tooltip="–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, —Å–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–∞–π–ª–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–≤—ã–π –∫—É—Å–æ–∫ –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ, —á—Ç–æ–±—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ñ–∞–π–ª—ã –¥–≤–∞–∂–¥—ã.">
                        <input type="checkbox" id="skipExisting">
                        –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã (--skip-existing)
                    </label>
                </div>
                <div style="margin-top: 8px;">
                    <label for="copyOnly" data-tooltip="–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, —Å–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –≤—ã—Ö–æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ (--copy-to), –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –∏—Ö –≤ –ø–∞–ø–∫—É copied_mp3. –û–±—Ä–∞–±–æ—Ç–∫–∞ MP3 —Ñ–∞–π–ª–æ–≤ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —Ä–µ–∂–∏–º, –µ—Å–ª–∏ —Ñ–∞–π–ª—ã —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∏ –∏—Ö –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å.">
                        <input type="checkbox" id="copyOnly">
                        –¢–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (--copy-only)
                    </label>
                </div>
            </div>
        </div>
        
        <div class="action-container">
            <button id="generateBtn" class="process-btn" disabled data-tooltip="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É</button>
        </div>
        
        <div class="command-container" id="commandContainer" style="display: none;">
            <h2>–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h2>
            <div class="command-output" id="commandOutput"></div>
            <button id="copyBtn" class="copy-btn" data-tooltip="–ö–æ–ø–∏—Ä—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –≤—Å—Ç–∞–≤–∏—Ç—å –µ—ë –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª.">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            const dropArea = document.getElementById('dropArea');
            const fileInput = document.getElementById('fileInput');
            const fileInfo = document.getElementById('fileInfo');
            const fileName = document.getElementById('fileName');
            const fileSize = document.getElementById('fileSize');
            const clearFileBtn = document.getElementById('clearFileBtn');
            const generateBtn = document.getElementById('generateBtn');
            const commandContainer = document.getElementById('commandContainer');
            const commandOutput = document.getElementById('commandOutput');
            const copyBtn = document.getElementById('copyBtn');
            const outputPath = document.getElementById('outputPath');
            const copyToPath = document.getElementById('copyToPath');
            const skipExisting = document.getElementById('skipExisting');
            const copyOnly = document.getElementById('copyOnly');

            // –ü–æ–ª–∑—É–Ω–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
            const durationSlider = document.getElementById('durationSlider');
            const durationValue = document.getElementById('durationValue');
            const windowSlider = document.getElementById('windowSlider');
            const windowValue = document.getElementById('windowValue');
            const thresholdSlider = document.getElementById('thresholdSlider');
            const thresholdValue = document.getElementById('thresholdValue');
            const minSilenceSlider = document.getElementById('minSilenceSlider');
            const minSilenceValue = document.getElementById('minSilenceValue');
            const speedSlider = document.getElementById('speedSlider');
            const speedValue = document.getElementById('speedValue');

            // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
            let selectedFile = null;

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è drag and drop
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });

            function highlight() {
                dropArea.classList.add('drag-over');
            }

            function unhighlight() {
                dropArea.classList.remove('drag-over');
            }

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è drop
            dropArea.addEventListener('drop', handleDrop, false);

            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0 && files[0].type === 'audio/mpeg') {
                    handleFiles(files);
                } else {
                    alert('–û—à–∏–±–∫–∞: –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ MP3 —Ñ–∞–π–ª.');
                }
            }

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥
            fileInput.addEventListener('change', function() {
                if (this.files.length > 0) {
                    if (this.files[0].type === 'audio/mpeg') {
                        handleFiles(this.files);
                    } else {
                        alert('–û—à–∏–±–∫–∞: –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ MP3 —Ñ–∞–π–ª.');
                        this.value = '';
                    }
                }
            });

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
            function handleFiles(files) {
                selectedFile = files[0];
                
                // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ
                fileName.textContent = selectedFile.name;
                fileSize.textContent = (selectedFile.size / (1024 * 1024)).toFixed(2);
                fileInfo.style.display = 'block';
                
                // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
                generateBtn.disabled = false;
            }

            // –û—á–∏—Å—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
            clearFileBtn.addEventListener('click', function() {
                selectedFile = null;
                fileInput.value = '';
                fileInfo.style.display = 'none';
                generateBtn.disabled = true;
                commandContainer.style.display = 'none';
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª–∑—É–Ω–∫–æ–≤
            durationSlider.addEventListener('input', function() {
                durationValue.textContent = this.value;
            });

            windowSlider.addEventListener('input', function() {
                windowValue.textContent = this.value;
            });

            thresholdSlider.addEventListener('input', function() {
                thresholdValue.textContent = this.value;
            });

            minSilenceSlider.addEventListener('input', function() {
                minSilenceValue.textContent = this.value;
            });

            speedSlider.addEventListener('input', function() {
                speedValue.textContent = this.value;
            });

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            function toggleProcessingSettings(enabled) {
                // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –ø–æ–ª–∑—É–Ω–∫–∏
                const sliders = document.querySelectorAll('.slider');
                sliders.forEach(slider => {
                    slider.disabled = !enabled;
                    slider.parentElement.style.opacity = enabled ? '1' : '0.5';
                });
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
                dropArea.style.opacity = enabled ? '1' : '0.5';
                dropArea.style.pointerEvents = enabled ? 'auto' : 'none';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
                generateBtn.textContent = enabled ? '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É' : '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è';
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ä–µ–∂–∏–º–∞ "—Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"
            copyOnly.addEventListener('change', function() {
                if (this.checked) {
                    // –í —Ä–µ–∂–∏–º–µ "—Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ" —Ñ–∞–π–ª –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
                    if (selectedFile) {
                        selectedFile = null;
                        fileInput.value = '';
                        fileInfo.style.display = 'none';
                    }
                    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã
                    generateBtn.disabled = false;
                    // –û—Ç–∫–ª—é—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
                    toggleProcessingSettings(false);
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
                    alert('–í —Ä–µ–∂–∏–º–µ "—Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ" –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –≤ –ø–æ–ª–µ "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤"');
                } else {
                    // –í –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞
                    generateBtn.disabled = !selectedFile;
                    // –í–∫–ª—é—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
                    toggleProcessingSettings(true);
                }
            });

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã
            generateBtn.addEventListener('click', function() {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –≤ —Ä–µ–∂–∏–º–µ "—Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ")
                if (!copyOnly.checked && !selectedFile) {
                    alert('–û—à–∏–±–∫–∞: –§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω.');
                    return;
                }

                // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                const params = {
                    duration: durationSlider.value,
                    window: windowSlider.value,
                    threshold: thresholdSlider.value,
                    minSilence: minSilenceSlider.value,
                    speed: speedSlider.value,
                    outputDir: outputPath.value.trim(),
                    copyTo: copyToPath.value.trim(),
                    skipExisting: skipExisting.checked,
                    copyOnly: copyOnly.checked
                };

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–µ–∂–∏–º "—Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"
                if (params.copyOnly && !params.copyTo) {
                    alert('–û—à–∏–±–∫–∞: –î–ª—è —Ä–µ–∂–∏–º–∞ "—Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ" –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –≤ –ø–æ–ª–µ "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤"');
                    return;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—É—Ç–∏ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
                if (params.copyTo && !checkPathExists(params.copyTo)) {
                    return; // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –æ–ø–µ—Ä–∞—Ü–∏—é
                }

                // –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ, –≥–¥–µ –ª–µ–∂–∏—Ç html
                const scriptDir = window.location.pathname
                    .replace(/\\/g, '/')
                    .replace(/\/[^/]*$/, '')
                    .replace(/%20/g, ' ');

                // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
                let command = `cd "${scriptDir}" && python split_mp3.py`;
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
                if (params.copyOnly) {
                    // –†–µ–∂–∏–º "—Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"
                    command += ` --copy-only --output-dir "${params.outputDir}" --copy-to "${params.copyTo}"`;
                } else {
                    // –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º –æ–±—Ä–∞–±–æ—Ç–∫–∏
                    command += ` -i "${selectedFile.name}" -o "${params.outputDir}" -d ${params.duration} -w ${params.window} -t ${params.threshold} -m ${params.minSilence} -s ${params.speed}`;
                    
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                    if (params.copyTo) {
                        command += ` --copy-to "${params.copyTo}"`;
                    }
                    
                    if (params.skipExisting) {
                        command += ` --skip-existing`;
                    }
                }
                
                // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
                commandOutput.textContent = command;
                commandContainer.style.display = 'block';
            });

            // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
            copyBtn.addEventListener('click', function() {
                const textToCopy = commandOutput.textContent;
                
                navigator.clipboard.writeText(textToCopy)
                    .then(() => {
                        const originalText = this.textContent;
                        this.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                        
                        setTimeout(() => {
                            this.textContent = originalText;
                        }, 2000);
                    })
                    .catch(err => {
                        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏: ', err);
                        alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–¥–µ–ª–∏—Ç–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é.');
                    });
            });
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—É—Ç–∏
            function checkPathExists(path) {
                // –í –±—Ä–∞—É–∑–µ—Ä–µ –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø—É—Ç–∏ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
                // –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—É—à–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ API –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ—Ö–æ–∂–µ –ª–∏ —ç—Ç–æ –Ω–∞ –ø—É—Ç—å –∫ –≤–Ω–µ—à–Ω–µ–º—É –¥–∏—Å–∫—É
                if (path.startsWith('/Volumes/') || path.match(/^[A-Z]:\\/)) {
                    const diskName = path.startsWith('/Volumes/') 
                        ? path.split('/')[2] 
                        : path.split('\\')[0];
                    
                    return confirm(`–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–Ω–µ—à–Ω–∏–π –¥–∏—Å–∫ "${diskName}" –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø—É—Ç–∏: ${path}\n\n–ù–∞–∂–º–∏—Ç–µ OK, –µ—Å–ª–∏ –¥–∏—Å–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω, –∏–ª–∏ –û—Ç–º–µ–Ω–∞, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –ø—É—Ç—å.`);
                }
                
                return true;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å –∫ SWIM PRO –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            setTimeout(() => {
                const swimProPath = copyToPath.value;
                if (swimProPath && swimProPath.includes('SWIM PRO')) {
                    checkPathExists(swimProPath);
                }
            }, 1000);

            // ===== –¢–µ–º–∞ (–Ω–æ—á–Ω–∞—è/–¥–Ω–µ–≤–Ω–∞—è) =====
            const themeBtn = document.getElementById('themeToggleBtn');
            function setTheme(dark) {
                document.body.classList.toggle('dark-theme', dark);
                themeBtn.textContent = dark ? '‚òÄÔ∏è' : 'üåô';
            }
            function getAutoDark() {
                const h = new Date().getHours();
                return (h >= 20 || h < 8);
            }
            function loadTheme() {
                const saved = localStorage.getItem('theme');
                if (saved === 'dark') return true;
                if (saved === 'light') return false;
                return getAutoDark();
            }
            setTheme(loadTheme());
            themeBtn.onclick = () => {
                const isDark = document.body.classList.toggle('dark-theme');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                themeBtn.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            };
        });
    </script>
</body>
</html>